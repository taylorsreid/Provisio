<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    
    <!-- import stylesheets -->
    <link rel="stylesheet" type="text/css" href="./resLookup.css">
    <link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="https://use.typekit.net/qrv7njf.css">
    

    <!-- import Javascript -->
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <script type="module" src="./js/login.js"></script>

</head>
<body>

    <!-- insert header -->
    <div w3-include-html="header.html"></div>
    <div class="container">
        <form>
            <label for="reservation-id">Reservation Look-Up</label>
            <input type="text" id="reservation-id" name="reservation-id" placeholder="Reservation ID">
            <button type="submit">Verify</button>
        </form>
        <p id="verification-result"></p>
    </div>
	<script>
		// get the form and the verification result element
		const form = document.querySelector('form');
		const verificationResult = document.querySelector('#verification-result');

		// listen for form submission
		form.addEventListener('submit', async (event) => {
			event.preventDefault();

			// get the reservation ID from the input field
			const reservationId = form.elements['reservation-id'].value;

			// make a request to the server to verify the reservation
			const response = await fetch(`/verify-reservation?reservation_id=${reservationId}`);

			// check the response status
			if (response.ok) {
				// display the verification result
				const data = await response.json();
				verificationResult.textContent = `Reservation for ${data.hotel_name}, room ${data.room_number} on ${data.check_in_date} - ${data.check_out_date} is confirmed.`;
			} else {
				verificationResult.textContent = 'Invalid reservation ID. Please try again.';
			}
		});
	</script>
	
</body>
</html>